<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Cyber Dictionary</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

/* ----------------- „Ç´„Çπ„Çø„É†„Éï„Ç©„É≥„Éà ----------------- */
@font-face {
  font-family: 'CustomWordFont';
  src: url('downloads/font9.ttf') format('truetype');
  font-weight: bold;
}

/* ----------------- Âü∫Êú¨„Çπ„Çø„Ç§„É´ ----------------- */
body {
  margin: 0;
  font-family: 'Orbitron', sans-serif;
  background: #0d0d0d;
  color: #0ff;
  overflow-x: hidden;
  position: relative;
}

/* ----------------- ËÉåÊôØ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ ----------------- */
body::before, body::after {
  content: '';
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  z-index: -2;
}
body::before {
  background: repeating-linear-gradient(
    0deg,
    rgba(0,255,255,0.05),
    rgba(0,255,255,0.05) 1px,
    transparent 1px,
    transparent 20px
  ),
  repeating-linear-gradient(
    90deg,
    rgba(0,255,255,0.05),
    rgba(0,255,255,0.05) 1px,
    transparent 1px,
    transparent 20px
  );
  animation: bgMove 10s linear infinite;
}
body::after {
  background: radial-gradient(circle, rgba(0,255,255,0.2) 1px, transparent 2px);
  background-size: 50px 50px;
  animation: lightMove 15s linear infinite;
  z-index: -1;
}
@keyframes bgMove {
  0% { background-position: 0 0, 0 0; }
  100% { background-position: 200px 200px, -200px -200px; }
}
@keyframes lightMove {
  0% { background-position: 0 0; }
  100% { background-position: 200px 200px; }
}

/* ----------------- „Éò„ÉÉ„ÉÄ„Éº ----------------- */
header {
  padding: 20px;
  background: linear-gradient(90deg, #111, #222);
  border-bottom: 2px solid #0ff;
  text-align: center;
  box-shadow: 0 0 10px #0ff;
}
h1 {
  margin: 0;
  color: #0ff;
  font-size: 2em;
  letter-spacing: 2px;
  text-shadow: 0 0 8px #0ff, 0 0 16px #0ff, 0 0 24px #0ff;
}
.search-box {
  margin-top: 10px;
  display: flex;
  justify-content: center;
  gap: 5px;
}
.search-box input,
.search-box select,
.search-box button {
  background: #111;
  color: #0ff;
  border: 1px solid #0ff;
  padding: 5px 10px;
  text-shadow: 0 0 4px #0ff;
  transition: all 0.2s;
}
.search-box input:focus,
.search-box select:focus,
.search-box button:hover {
  box-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
  border-color: #0ff;
  outline: none;
}

/* ----------------- ÂçòË™û„É™„Çπ„Éà ----------------- */
.word-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 10px;
  padding: 20px;
}
.word-item {
  font-family: 'CustomWordFont', 'Orbitron', sans-serif;
  font-weight: bold;
  background: #111;
  border: 1px solid #0ff;
  padding: 15px;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.3s;
  text-align: center;
  text-shadow: 0 0 2px #0ff;
}
.word-item:hover {
  transform: scale(1.08);
  background: #222;
  box-shadow: 0 0 12px #0ff, 0 0 24px #0ff inset;
}

/* ----------------- „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥ ----------------- */
.pagination {
  display: flex;
  justify-content: center;
  padding: 10px;
  gap: 5px;
}
.pagination button {
  background: #111;
  color: #0ff;
  border: 1px solid #0ff;
  padding: 5px 10px;
  text-shadow: 0 0 2px #0ff;
  transition: all 0.2s;
}
.pagination button:hover {
  box-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
}

/* ----------------- Ë©≥Á¥∞„Ç´„Éº„Éâ ----------------- */
.detail-card {
  position: fixed;
  top: 0;
  right: -100%;
  width: 80%;
  max-width: 400px;
  height: 100%;
  background: #111;
  border-left: 2px solid #0ff;
  transition: right 0.5s ease, opacity 0.5s ease;
  z-index: 1000;
  overflow-y: auto;
  opacity: 0;
}
.detail-card.show {
  right: 0;
  opacity: 1;
  animation: neonGlow 1.2s infinite alternate;
}
@keyframes neonGlow {
  from { box-shadow: 0 0 10px #0ff, 0 0 20px #0ff; }
  to { box-shadow: 0 0 20px #0ff, 0 0 40px #0ff; }
}
.card-content {
  padding: 20px;
}
#closeCard {
  background: none;
  border: none;
  color: #f0f;
  font-size: 1.2em;
  float: right;
  cursor: pointer;
  text-shadow: 0 0 6px #f0f, 0 0 12px #f0f;
  transition: all 0.2s;
}
#closeCard:hover {
  text-shadow: 0 0 12px #f0f, 0 0 24px #f0f, 0 0 36px #f0f;
}
#detailForm {
  font-family: 'CustomWordFont', 'Orbitron', sans-serif;
  font-weight: bold;
  font-size: 1.6em;
  text-shadow: 0 0 8px #0ff, 0 0 16px #0ff;
}
h3 {
  margin-bottom: 5px;
  border-bottom: 1px solid #0ff;
  padding-bottom: 2px;
  text-shadow: 0 0 4px #0ff;
}
p {
  margin: 2px 0;
}

/* ----------------- phrase „Éõ„Éê„Éº ----------------- */
#detailPhrases p {
  transition: all 0.3s;
  cursor: pointer;
}
#detailPhrases p:hover {
  color: #f0f;
  text-shadow: 0 0 10px #f0f, 0 0 20px #f0f, 0 0 30px #f0f;
  transform: scale(1.05);
}
</style>
</head>
<body>

<header>
<h1>CYBER DICTIONARY</h1>
<div class="search-box">
  <input type="text" id="searchInput" placeholder="Ê§úÁ¥¢...">
  <select id="searchMode">
    <option value="partial">ÈÉ®ÂàÜ‰∏ÄËá¥</option>
    <option value="exact">ÂÆåÂÖ®‰∏ÄËá¥</option>
    <option value="prefix">ÂâçÊñπ‰∏ÄËá¥</option>
  </select>
  <button id="searchBtn">üîç</button>
</div>
</header>

<main>
<div id="wordList" class="word-list"></div>
<div id="pagination" class="pagination"></div>
</main>

<aside id="detailCard" class="detail-card">
<div class="card-content">
  <button id="closeCard">‚úñ</button>
  <h2 id="detailForm"></h2>
  <div id="detailTranslations"></div>
  <div id="detailContents"></div>
  <div id="detailVariations"></div>
  <div id="detailRelations"></div>
  <div id="detailPhrases"></div>
</div>
</aside>

<script>
let words = [];
let currentPage = 1;
const perPage = 50;

async function loadWords() {
  const res = await fetch("a.json");
  const data = await res.json();
  words = data.words || [];
  renderPage(1);
}

function renderPage(page) {
  currentPage = page;
  const start = (page - 1) * perPage;
  const end = start + perPage;
  const list = document.getElementById("wordList");
  list.innerHTML = "";

  words.slice(start, end).forEach(w => {
    const div = document.createElement("div");
    div.className = "word-item";
    div.textContent = w.entry.form;
    div.onclick = () => showDetail(w);
    list.appendChild(div);
  });

  renderPagination();
}

function renderPagination() {
  const totalPages = Math.ceil(words.length / perPage);
  const pagination = document.getElementById("pagination");
  pagination.innerHTML = "";

  for (let i = 1; i <= totalPages; i++) {
    const btn = document.createElement("button");
    btn.textContent = i;
    btn.onclick = () => renderPage(i);
    if (i === currentPage) btn.style.background = "#0ff";
    pagination.appendChild(btn);
  }
}

function showDetail(word) {
  document.getElementById("detailForm").textContent = word.entry.form;
  document.getElementById("detailTranslations").innerHTML =
    "<h3>Ë®≥Ë™û</h3>" + word.translations.map(t => `<p>[${t.title}] ${t.forms.join(", ")}</p>`).join("");
  document.getElementById("detailContents").innerHTML =
    "<h3>ÂÜÖÂÆπ</h3>" + word.contents.map(c => `<p>${c.title}: ${c.text}</p>`).join("");
  document.getElementById("detailVariations").innerHTML =
    "<h3>Â§âÂåñÂΩ¢</h3>" + word.variations.map(v => `<p>${v.title}: ${v.form}</p>`).join("");
  document.getElementById("detailRelations").innerHTML =
    "<h3>Èñ¢ÈÄ£Ë™û</h3>" + word.relations.map(r => `<p>${r.title}: ${r.entry.form}</p>`).join("");
  document.getElementById("detailPhrases").innerHTML =
    "<h3>ÊàêÂè•</h3>" + (word.phrases ? word.phrases.map(p => `<p>[${p.titles.join(", ")}] ${p.form}: ${p.termString}</p>`).join("") : "<p>„Å™„Åó</p>");

  document.getElementById("detailCard").classList.add("show");
}

document.getElementById("closeCard").onclick = () => {
  document.getElementById("detailCard").classList.remove("show");
};

document.getElementById("searchBtn").onclick = () => {
  const keyword = document.getElementById("searchInput").value.trim();
  const mode = document.getElementById("searchMode").value;
  let filtered = [];

  if (mode === "partial") {
    filtered = words.filter(w => w.entry.form.includes(keyword));
  } else if (mode === "exact") {
    filtered = words.filter(w => w.entry.form === keyword);
  } else if (mode === "prefix") {
    filtered = words.filter(w => w.entry.form.startsWith(keyword));
  }

  if (filtered.length > 0) words = filtered;
  else words = [];
  renderPage(1);
};

loadWords();
</script>
</body>
</html>
